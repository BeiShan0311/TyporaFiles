## 一、动态数组的数据结构

```c
typedef struct DynamicArray
{
    // 指向数据存储空间的指针
    ELEMENTTYPE *data;
	// 描述当前数据所占的内存块大小和已经使用的内存块大小
    int size;    	// 元素个数
    int capacity;	// 容量大小
} DynamicArray;
```

------

## 二、动态数组的函数

### 初始化与销毁

```c
/* 动态数组初始化。
 * @param pArray  指向动态数组数据存放位置的指针。
 * @parameter capacity  动态数组的初始容量。
 * @return 非零表示失败。
 */
int dynamicArrayInit(DynamicArray *pArray, int capacity);
```

**初始化函数`dynamicArrayInit()`：**

- `判空`，判断传入参数`pArray`是否为空。
- 判断`capacity`范围是否合法。
- `malloc`申请内存空间。
- 检查`malloc`申请内存空间是否成功。
- 清除脏数据，将`malloc`申请的内存空间数据设置为全`0`。
- 初始化`size`和`capacity`的值。

```c
/* 动态数组初销毁并释放内存空间。
 * @param pArray  指向动态数组数据存放位置的指针。
 * @return 非零表示失败。
 */
int dynamicArrayDestory(DynamicArray *pArray);
```

**销毁函数`dynamicArrayDestory()`：**

- 判空。
- 先判断`free()`函数作用的地址空间是否合法，即是否为`malloc()`、`calloc()`、`realloc()`等动态内存分配函数所返回的指针所指向的内存空间。若合法，则使用`free()`函数释放内存空间。
- 将数据区的内存指针指向`NULL`，用于指明当前的动态数组已经被销毁。

### 扩容与缩容

```c
/* 动态数组扩容
 * @param pArray 动态数组数据初始位置。
 * @return 非零表示失败。
 */
static int expandDynamicArrayCapacity(DynamicArray *pArray);

/* 动态数组缩容
 * @param pArray 动态数组数据初始位置。
 * @return 非零表示失败。
 */
static int shrinkDynamicArrayCapacity(DynamicArray *pArray);
```

**动态数组扩容`expandDynamicArrayCapacity()`：**

- 数据备份。
- 分配一块`更大`的内存空间。
- `malloc`申请内存空间。
- 新空间判空并清除脏数据。
- 数据迁移。
- 释放旧的内存空间。
- 更新数组容量。

**动态数组缩容`shrinkDynamicArrayCapacity()`：**

- 数据备份。
- 分配一块`更小`的内存空间。
- `malloc`申请内存空间。
- 新空间判空并清除脏数据。
- 数据迁移。
- 释放旧的内存空间。
- 更新数组容量。

### 插入

```c
/* 动态数组插入元素。
 * @param *pArray  动态数组数据初始位置。
 * @param data  要插入的数据。
 * @return 非零表示失败。
 */
int dynamicArrayInsertData(DynamicArray *pArray, ELEMENTTYPE data);

/* 动态数组在指定位置插入数组。
 * @param *pArray  动态数组数据初始位置。
 * @param pos  插入位置。
 * @param data  要插入的数据。
 * @return 非零表示失败。
 */
int dynamicArrayAppointPosInsertData(DynamicArray *pArray, int pos, ELEMENTTYPE data);

/* 根据元素的值，获取数据的位置。
 * @param *pArray  动态数组数据初始位置。
 * @param *pos  返回指向存放元素位置的地址空间的指针。
 * @param data  要查找的数据。
 * @return 非零表示查找失败。
 */
static int dynamicArrayAppointDataGetPos(DynamicArray *pArray, int data, int *pos);
```

**默认插入`dynamicArrayInsertData()`：**

- 调用指定位置插入函数`dynamicArrayAppointPosInsertData()`在数组末尾处插入即可，`pos`设置为`pArray->size`。

**在指定位置出插入`dynamicArrayAppointPosInsertData()`：**

- 判空。
- 判断插入位置是否合法，即插入的位置要在动态数组的`非空`数据区。
- 判断数组空间是否告急，若告急调用`扩容`函数。
- 将插入位置之后的非空数据区数据依次向后移动一个位置。
- 将要插入的数据赋值给插入位置。
- 更新动态数组数据个数`size`。

**查找与`data`相同的数据所在地位置`dynamicArrayAppointDataGetPos()`：**

- 找到第一个与`data`相同的数据所在的位置，并返回查找成功标识`0`。
- 若未找到返回`-1`。

### 查找

```c
/* 获取动态数组元素个数。
 * @param *pArray  动态数组数据初始位置。
 * @param *pSize 返回指向存放元素个数的地址空间的指针。
 * @return 非零表示失败。
 */
int dynamicArrayGetSize(DynamicArray *pArray, int *pSize);

/* 获取动态数组容量。
 * @param *pArray  动态数组数据初始位置。
 * @param *pCapacity  返回指向存放容量的地址空间的指针。
 * @return 非零表示失败。
 */
int dynamicArrayGetCapacity(DynamicArray *pArray, int *pCapacity);

/* 获取指定位置的值。
 * @param *pArray  动态数组数据初始位置。
 * @param pos  要查找的位置。
 * @param *pData  返回指向存放数据的地址空间的指针。
 * @return 非零表示失败。
 */
int dynamicArrayGetAppointPosData(DynamicArray *pArray, int pos, int *data);
```

**获取动态数组元素个数`dynamicArrayGetSize()`：**

- 判空，`pArray`与`pSize`。
- 将元素个数放在`pSize`指向的内存空间。

**获取动态数组容量`dynamicArrayGetCapacity()`：**

- 判空，`pArray`与`pCapacity`。
- 将数组容量放在`pCapacity`指向的内存空间。

**获取指定位置的值`dynamicArrayGetAppointPosData()`：**

- 判空，`pArray`与`data`。
- 判断`pos`的合法性。
- 将数据放在`data`指向的内存空间。

### 删除

```c
/* 动态数组删除元素，默认删除末尾元素。
 * @param pArray 动态数组数据初始位置。
 * @return 非零表示失败。
 */
int dynamicArrayDeleteData(DynamicArray *pArray);

/* 在指定位置删除元素。
 * @param pArray  动态数组数据初始位置。
 * @param pos  要删除的数据所在的位置。
 * @return 非零表示失败。
 */
int dynamicArrayAppointPosDeleteData(DynamicArray *pArray, int pos);

/* 动态数组删除指定的值。
 * @param pArray  动态数组数据初始位置。
 * @param data  要删除的数据。
 * @return 非零表示失败。
 */
int dynamicArrayDeleteAppointData(DynamicArray *pArray, ELEMENTTYPE data);
```

**默认删除`dynamicArrayDeleteData()`：**

- 调用指定位置删除函数`dynamicArrayAppointPosDeleteData()`在数组末尾处删除即可，`pos`设置为`pArray->size`。

**指定位置删除`dynamicArrayAppointPosDeleteData()`：**

- 判空。
- 判断删除位置是否合法，即插入的位置要在动态数组的`非空`数据区。
- 判断数组空间是否`冗余`，若冗余调用`缩容`函数。
- 将要删除的数据设置为`0`。
- 将删除位置之后的非空数据区数据依次向前移动一个位置。
- 更新动态数组数据个数`size`。

**删除指定数据`dynamicArrayDeleteAppointData()`：**

- 判空。
- 挨个查找并删除数据与`data`相同的数据。
- 当查找失败时结束函数。

