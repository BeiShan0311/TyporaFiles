# 线程同步

## 行缓冲



## 线程共享资源

线程除了id号不独立，其他资源都是共享的

线程不共享各自的栈空间

## 解决资源共享的问题-进程同步机制

1. 互斥锁mutex

   互斥锁，读写锁，自旋锁。使用场景不对，资源消耗不同。

   初始化锁：pthread_mutex_init

   销毁锁：pthread_mutex_destory

   上锁：pthread_mutex_lock

   解锁：pthread_mutex_unlock

   加锁是一件浪费CPU时间的事情。

   且会导致饥饿。

2. 条件变量

   条件变量本身是用来等待的，它本身没有锁

   广播不好，广播会让所有人都停下工作。因此signal好

   signal 单个告知

   boardcast 广播。会产生惊群效应

   wait函数不消耗任何cpu时间

3. 信号量

   

   